// 如果是像企号通 webapp 版本的 localstorage 复合结果的操作可以
function getAllData(p1, p2, rcb){
  var aq = new ActionQueue().setMaxError(0)
    , cache = {}
    ;
  aq.push(function(fin){
    /* use p1 to fetch data part 1 */
    if (cache['A']) {
      // use cache for synchronous code
      aq.result['A'] = cache['A'];
      fin();
    } else {
      // or call db for asynchronous code
      db.get(p1, function(err, result1){
        aq.result['A'] = result1;
        fin(err);
      });
    }
  });
  aq.push(http.get, ['http://www.google.com'], function(result){
    aq.result['A'] = result1;
  });
  aq.end(rcb);
}
// getAllData bacome a classic NodeJS async function with callback as the last argument
// so deferred is just not very usable, and it's just very complicated
