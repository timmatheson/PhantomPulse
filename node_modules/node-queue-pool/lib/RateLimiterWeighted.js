function RateLimiterWeighted(timespan, maxAmount){
  this.timespan = timespan;
  this.maxAmount = maxAmount;
  this.inSpanAmount = 0;
  var me = this;
  this.hInterval = setInterval(function(){
    // console.log('\n\n me.inSpanAmount', me.inSpanAmount);
    me.inSpanAmount = 0;
    me._resume();
  }, timespan);
}
RateLimiterWeighted.prototype.check = function(option){
  return this.inSpanAmount + (option.weight || 1) <= this.maxAmount;
}
RateLimiterWeighted.prototype.count = function(option){
  this.inSpanAmount += (option.weight || 1);
}

exports.class = RateLimiterWeighted;