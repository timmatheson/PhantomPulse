function ConcurrencyLimiterWeighted(maxConcurrency){
  this.maxConcurrency = maxConcurrency;
  this.onWayCount = 0;
}
ConcurrencyLimiterWeighted.prototype.check = function(option){
  return this.onWayCount < this.maxConcurrency;
}
ConcurrencyLimiterWeighted.prototype.count = function(option){
  this.onWayCount += ( (typeof option.weight === 'number') ? option.weight : 1  );
}
ConcurrencyLimiterWeighted.prototype.actcb = function(err, result, option){
  this.onWayCount -= ( (typeof option.weight === 'number') ? option.weight : 1  );
  return true;
}

exports.class = ConcurrencyLimiterWeighted;